<div class="container mt-4">
  <!-- Cabecera de bienvenida -->
  <div class="d-flex justify-content-center align-items-center mb-4">
    <div class="text-center p-4" style="background-color: #f0f0f0; border-radius: 10px; width: 100%; max-width: 1200px;">
      <h1 style="font-size: 2.5rem; color: #0D5492;">¡Bienvenido a nuestra tienda!</h1>
      <p style="font-size: 1.2rem; color: #333;">Encuentra los mejores productos para ti. Explora nuestra lista de productos a continuación.</p>
    </div>
  </div>

  <!-- Lista de productos -->
  <div class="d-flex justify-content-center">
    <div class="w-100" style="max-width: 1200px;">
      <!-- Filtros y Botones -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="d-flex w-100">
          <!-- Filtros -->
          <div class="me-3">
            <label for="filtroCategoria" class="form-label">Categoría</label>
            <select id="filtroCategoria" class="form-select" [(ngModel)]="categoriaFiltro" (change)="filtrarProductos()">
              <option value="" selected>Todas</option>
              <option value="Electrónica">Electrónica</option>
              <option value="Ropa">Ropa</option>
              <option value="Alimentos">Alimentos</option>
            </select>
          </div>
          <div class="me-3">
            <label for="filtroCantidad" class="form-label">Cantidad mínima</label>
            <input id="filtroCantidad" type="number" class="form-control" [(ngModel)]="cantidadFiltro" (input)="filtrarProductos()" />
          </div>
          <div class="me-3">
            <label for="filtroPrecio" class="form-label">Precio máximo</label>
            <input id="filtroPrecio" type="number" class="form-control" [(ngModel)]="precioFiltro" (input)="filtrarProductos()" />
          </div>
        </div>

        <!-- Botones: Agregar Producto y Exportar PDF -->
        <div class="d-flex align-items-center">
          <button 
            class="btn btn-sm me-2" 
            style="background-color: white; color: #0D5492; border: 2px solid #0D5492; border-radius: 15px; min-width: 150px;" 
            data-bs-toggle="modal" data-bs-target="#productModal">
            <i class="bi bi-plus-circle" style="color: #0D5492;"></i> Agregar Producto
          </button>
          <button 
            class="btn btn-sm" 
            style="background-color: white; color: #0D5492; border: 2px solid #0D5492; border-radius: 15px; min-width: 150px;" 
            (click)="exportarPDF()">
            <i class="bi bi-file-earmark-pdf" style="color: #0D5492;"></i> Exportar PDF
          </button>
        </div>
        
      </div>

      <!-- Tabla de productos -->
      <table class="table table-striped mt-3">
        <thead>
          <tr>
            <th>#</th>
            <th>Nombre</th>
            <th>Categoría</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="productosFiltrados.length === 0">
            <td colspan="6" class="text-center">No hay productos registrados</td>
          </tr>
          <tr *ngFor="let producto of productosFiltrados; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.categoria }}</td>
            <td>{{ producto.precio }}</td>
            <td>{{ producto.cantidad }}</td>
            <td>
              <button 
                class="btn btn-sm me-2" 
                style="background-color: #0D5492; border-radius: 15px; border: none; color: white;" 
                (click)="verDetalle(producto)">
                <i class="bi bi-eye" style="color: white;"></i> Visualizar producto
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Modal Agregar Producto -->
      <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="productModalLabel">Agregar Producto</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <app-product-form (productSaved)="onProductSaved()"></app-product-form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
